<!DOCTYPE html>
<html lang="sv">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Model Context Protocol - Uppsala University</title>
    
    <!-- Material Icons -->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    
    <!-- Reveal.js CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/reveal.js@4.6.1/dist/reveal.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/reveal.js@4.6.1/dist/theme/black.css">
    
    <!-- Custom presentation CSS -->
    <link rel="stylesheet" href="style.css">
    
    <style>
        /* Reveal.js specific overrides - FIX SYSTEMISKA PROBLEM */
        /* Detta m√•ste komma EFTER reveal.css och black.css f√∂r att override:a dem */
        
        /* FAS 2.1 + 2.2: Fix section display och override black theme */
        /* Inneh√•llet ligger DIREKT i section - rikta CSS mot section och dess direkta barn */
        
        /* Section styling */
        /* PROBLEM IDENTIFIED: Reveal.js sets inline style display:block and fixed width (960px) */
        /* SOLUTION: Override with !important and use JavaScript to remove inline styles */
        .reveal .slides section {
            text-align: left !important;
            background: transparent !important;
            color: #e2e8f0 !important;
            padding: 2vh 2vw !important;
            max-width: min(1400px, calc(100vw - 2 * clamp(20px, 2vw, 40px))) !important;
            width: 100vw !important;  /* Use viewport width instead of fixed 960px */
            min-width: 100vw !important;
            height: auto !important;
            min-height: 96vh !important;
            max-height: none !important;  /* Remove height restriction */
            margin: 0 auto !important;
            display: flex !important;
            flex-direction: column !important;
            align-items: flex-start !important;
            justify-content: flex-start !important;
        }
        
        /* Override Reveal.js inline styles - these have higher specificity */
        .reveal .slides section[style] {
            display: flex !important;
            width: 100vw !important;
            min-width: 100vw !important;
            height: auto !important;
            min-height: 96vh !important;
            max-height: none !important;
        }
        
        /* Override Reveal.js black theme f√∂r section */
        .reveal .slides section.present {
            background: transparent !important;
            color: #e2e8f0 !important;
        }
        
        /* Override .slide-background om Reveal.js skapar den */
        .reveal .slides section .slide-background {
            display: none !important;  /* G√∂m bakgrundselement */
        }
        
        /* .slide-background-content om Reveal.js skapar den */
        .reveal .slides section .slide-background-content {
            display: flex !important;
            flex-direction: column !important;
            text-align: left !important;
            background: transparent !important;
            color: #e2e8f0 !important;
            padding: 2vh 2vw !important;
            max-width: min(1400px, calc(100vw - 2 * clamp(20px, 2vw, 40px))) !important;
            width: 100% !important;
            height: auto !important;
            max-height: 96vh !important;
            align-items: flex-start !important;
            justify-content: flex-start !important;
            margin: 0 auto !important;
        }
        
        .reveal .slides section h1,
        .reveal .slides section h2,
        .reveal .slides section h3,
        .reveal .slides section .slide-background-content h1,
        .reveal .slides section .slide-background-content h2,
        .reveal .slides section .slide-background-content h3 {
            color: #ffffff !important;
            text-align: center !important;
        }
        
        /* Override Reveal.js default body/section styling */
        .reveal .slides section * {
            box-sizing: border-box !important;
        }
        
        .reveal .notes {
            display: none;
        }
    </style>
</head>
<body>
    <div class="reveal">
        <div class="slides">
            <!-- DIAGNOSTIC TEST SLIDE - Minimal test to isolate problem -->
            <section data-state="diagnostic-test">
                <h1>DIAGNOSTIC TEST</h1>
                <div class="flow-diagram">
                    <div class="flow-box">Test Box 1</div>
                    <span class="material-icons flow-arrow">arrow_forward</span>
                    <div class="flow-box">Test Box 2</div>
                </div>
                <p>This is a minimal test slide to diagnose layout issues.</p>
            </section>
            
            <!-- Slide 001: Title + Overview -->
            <section>
                    <h1 class="title-slide-h1">Model Context Protocol</h1>
                    <div class="subtitle-large">Connecting LLMs to External Systems</div>
                    
                    <div class="presenter-info">
                        Uppsala University<br>
                        November 18, 2025
                    </div>

                    <div class="agenda">
                        <div class="agenda-title">Agenda</div>
                        <div class="agenda-item">
                            <span class="material-icons agenda-icon">psychology</span>
                            <div>LLM Fundamentals</div>
                        </div>
                        <div class="agenda-item">
                            <span class="material-icons agenda-icon">extension</span>
                            <div>Context & Integration Challenges</div>
                        </div>
                        <div class="agenda-item">
                            <span class="material-icons agenda-icon">electrical_services</span>
                            <div>Deep Dive: Model Context Protocol</div>
                        </div>
                    </div>
                <aside class="notes"></aside>
            </section>
            
            <!-- Slide 002: What is a Large Language Model? -->
            <!-- TEST: Ta bort .slide wrapper f√∂r att se om det fixar layout -->
            <section>
                <h1>What is a Large Language Model?</h1>
                
                <div class="flow-diagram">
                    <div class="flow-box">Input Text</div>
                    <span class="material-icons flow-arrow">arrow_forward</span>
                    <div class="flow-box flow-box-highlight">
                        Neural Network<br><small class="flow-box-note">(Black Box)</small>
                    </div>
                    <span class="material-icons flow-arrow">arrow_forward</span>
                    <div class="flow-box">Output Text</div>
                </div>

                <div class="characteristics">
                    <div class="characteristic">
                        <span class="material-icons characteristic-icon">memory</span>
                        <div class="characteristic-title">Billions of Parameters</div>
                        <div class="characteristic-text">
                            Hundreds of billions of weights learned during training
                        </div>
                    </div>

                    <div class="characteristic">
                        <span class="material-icons characteristic-icon">database</span>
                        <div class="characteristic-title">Massive Training Data</div>
                        <div class="characteristic-text">
                            Trained on internet text, books, code repositories, and more
                        </div>
                    </div>

                    <div class="characteristic">
                        <span class="material-icons characteristic-icon">trending_up</span>
                        <div class="characteristic-title">Next Token Prediction</div>
                        <div class="characteristic-text">
                            Core operation: predict the next token in a sequence
                        </div>
                    </div>
                </div>
                <aside class="notes"></aside>
            </section>
            
            <!-- Slide 003: Transformer Architecture -->
            <section>
                    <h1>Transformer Architecture (Simplified)</h1>
                    
                    <div class="architecture-flow">
                        <div class="flow-row">
                            <div class="flow-item">
                                <span class="material-icons flow-icon">text_fields</span>
                                <div class="flow-content">
                                    <div class="flow-title">Input Tokens</div>
                                    <div class="flow-description">Text converted into numerical vectors</div>
                                </div>
                            </div>
                            <span class="material-icons flow-arrow">arrow_downward</span>
                        </div>

                        <div class="flow-row">
                            <div class="flow-item">
                                <span class="material-icons flow-icon">layers</span>
                                <div class="flow-content">
                                    <div class="flow-title">Embeddings</div>
                                    <div class="flow-description">Tokens converted to numerical representations</div>
                                </div>
                            </div>
                            <span class="material-icons flow-arrow">arrow_downward</span>
                        </div>

                        <div class="flow-row">
                            <div class="flow-item flow-highlight">
                                <span class="material-icons flow-icon">visibility</span>
                                <div class="flow-content">
                                    <div class="flow-title">Attention Mechanism</div>
                                    <div class="flow-description">Weighs importance of different parts of input when processing each token. Enables understanding of relationships and long-range dependencies.</div>
                                </div>
                            </div>
                            <span class="material-icons flow-arrow">arrow_downward</span>
                        </div>

                        <div class="flow-row">
                            <div class="flow-item">
                                <span class="material-icons flow-icon">account_tree</span>
                                <div class="flow-content">
                                    <div class="flow-title">Feed-Forward Networks</div>
                                    <div class="flow-description">Transform representations, building increasingly abstract features through layers</div>
                                </div>
                            </div>
                            <span class="material-icons flow-arrow">arrow_downward</span>
                        </div>

                        <div class="flow-row">
                            <div class="flow-item">
                                <span class="material-icons flow-icon">bar_chart</span>
                                <div class="flow-content">
                                    <div class="flow-title">Output Probabilities</div>
                                    <div class="flow-description">Probability distribution over possible next tokens</div>
                                </div>
                            </div>
                        </div>
                    </div>
                <aside class="notes"></aside>
            </section>
            
            <!-- Slide 004: Tokens, Context Windows, and Limitations -->
            <section>
                    <h1>Tokens, Context Windows, and Limitations</h1>
                    
                    <div class="content-grid">
                        <!-- Tokens Section -->
                        <div class="section">
                            <div class="section-title">
                                <span class="material-icons section-icon">label</span>
                                Tokens
                            </div>
                            <div class="token-example">
                                <div class="token-text">"Hello world"</div>
                                <div class="token-breakdown">
                                    <span class="token">Hello</span>
                                    <span class="token"> world</span>
                                </div>
                            </div>
                            <div class="token-info">
                                Text broken into chunks. In English, ~3/4 of a word per token. Everything is measured in tokens.
                            </div>
                        </div>

                        <!-- Context Window Section -->
                        <div class="section">
                            <div class="section-title">
                                <span class="material-icons section-icon">memory</span>
                                Context Window
                            </div>
                            <div class="context-window">
                                <div class="window-box">
                                    <div class="window-text">8K - 200K+ tokens</div>
                                </div>
                                <div class="window-info">
                                    Limited working memory. Even largest models can't fit massive codebases or document collections.
                                </div>
                            </div>
                        </div>

                        <!-- Limitations Section -->
                        <div class="section limitations">
                            <div class="section-title">
                                <span class="material-icons section-icon">warning</span>
                                Key Limitations
                            </div>
                            <div class="limitations-grid">
                                <div class="limitation">
                                    <span class="material-icons limitation-icon">lock</span>
                                    <div class="limitation-content">
                                        <div class="limitation-title">Static Knowledge</div>
                                        <div class="limitation-text">Only knows what was in training data. Can't access new information after training.</div>
                                    </div>
                                </div>

                                <div class="limitation">
                                    <span class="material-icons limitation-icon">block</span>
                                    <div class="limitation-content">
                                        <div class="limitation-title">No Tool Use</div>
                                        <div class="limitation-text">Can't execute code, query databases, or call APIs - only generates text suggestions.</div>
                                    </div>
                                </div>

                                <div class="limitation">
                                    <span class="material-icons limitation-icon">history</span>
                                    <div class="limitation-content">
                                        <div class="limitation-title">No Memory</div>
                                        <div class="limitation-text">Each conversation starts fresh. Doesn't remember previous sessions.</div>
                                    </div>
                                </div>

                                <div class="limitation">
                                    <span class="material-icons limitation-icon">error</span>
                                    <div class="limitation-content">
                                        <div class="limitation-title">Hallucination</div>
                                        <div class="limitation-text">When uncertain, generates plausible-sounding but incorrect information.</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                <aside class="notes"></aside>
            </section>
            
            <!-- Slide 005: The Problem - LLMs are Isolated -->
            <section>
                    <h1>The Problem - LLMs are Isolated</h1>
                    
                    <div class="isolation-container">
                        <div class="llm-bubble">
                            <span class="material-icons llm-icon">smart_toy</span>
                            <div class="llm-label">LLM</div>
                        </div>

                        <div class="gap-indicator">‚ùå Disconnected ‚ùå</div>

                        <div class="external-systems">
                            <div class="system-item">
                                <span class="material-icons system-icon">storage</span>
                                <div class="system-label">Databases</div>
                            </div>

                            <div class="system-item">
                                <span class="material-icons system-icon">cloud</span>
                                <div class="system-label">APIs</div>
                            </div>

                            <div class="system-item">
                                <span class="material-icons system-icon">folder</span>
                                <div class="system-label">File Systems</div>
                            </div>

                            <div class="system-item">
                                <span class="material-icons system-icon">update</span>
                                <div class="system-label">Real-time Data</div>
                            </div>

                            <div class="system-item">
                                <span class="material-icons system-icon">person</span>
                                <div class="system-label">User-specific Info</div>
                            </div>

                            <div class="system-item">
                                <span class="material-icons system-icon">calendar_today</span>
                                <div class="system-label">Calendars</div>
                            </div>

                            <div class="system-item">
                                <span class="material-icons system-icon">email</span>
                                <div class="system-label">Emails</div>
                            </div>

                            <div class="system-item">
                                <span class="material-icons system-icon">code</span>
                                <div class="system-label">Codebases</div>
                            </div>
                        </div>
                    </div>
                <aside class="notes"></aside>
            </section>
            
            <!-- Slide 006: Naive Solutions and Their Problems -->
            <section>
<h1>Naive Solutions and Their Problems</h1>
        
        <div class="solutions-grid">
            <!-- Solution 1: Copy-paste everything -->
            <div class="solution">
                <div class="solution-header">
                    <span class="material-icons solution-icon">content_copy</span>
                    <div class="solution-title">Dump Everything</div>
                </div>
                <div class="solution-description">
                    Copy entire database, all files, everything into the prompt
                </div>
                <div class="problems-list">
                    <div class="problem-item">
                        <span class="material-icons problem-icon">close</span>
                        <div>Most data won't fit in context window</div>
                    </div>
                    <div class="problem-item">
                        <span class="material-icons problem-icon">close</span>
                        <div>Wastes tokens and money</div>
                    </div>
                    <div class="problem-item">
                        <span class="material-icons problem-icon">close</span>
                        <div>Model performs worse with massive, unfocused context</div>
                    </div>
                </div>
            </div>

            <!-- Solution 2: Fine-tune -->
            <div class="solution">
                <div class="solution-header">
                    <span class="material-icons solution-icon">tune</span>
                    <div class="solution-title">Fine-tune on Data</div>
                </div>
                <div class="solution-description">
                    Train a custom model on your specific data
                </div>
                <div class="problems-list">
                    <div class="problem-item">
                        <span class="material-icons problem-icon">close</span>
                        <div>Expensive and requires ML expertise</div>
                    </div>
                    <div class="problem-item">
                        <span class="material-icons problem-icon">close</span>
                        <div>Data changes - model becomes stale immediately</div>
                    </div>
                    <div class="problem-item">
                        <span class="material-icons problem-icon">close</span>
                        <div>Need to continuously retrain</div>
                    </div>
                </div>
            </div>

            <!-- Solution 3: Custom integrations -->
            <div class="solution">
                <div class="solution-header">
                    <span class="material-icons solution-icon">extension</span>
                    <div class="solution-title">Custom Integrations</div>
                </div>
                <div class="solution-description">
                    Build bespoke code for each application
                </div>
                <div class="problems-list">
                    <div class="problem-item">
                        <span class="material-icons problem-icon">close</span>
                        <div>Every team reinvents the wheel</div>
                    </div>
                    <div class="problem-item">
                        <span class="material-icons problem-icon">close</span>
                        <div>No standardization - breaks when models change</div>
                    </div>
                    <div class="problem-item">
                        <span class="material-icons problem-icon">close</span>
                        <div>Testing and security become nightmares</div>
                    </div>
                </div>
            </div>
        </div>
                <aside class="notes"></aside>
            </section>
            
            <!-- Slide 007: Better Approaches - RAG vs Function Calling vs MCP -->
            <section>
<h1>Better Approaches</h1>
        
        <div class="approaches-grid">
            <!-- RAG -->
            <div class="approach">
                <div class="approach-header">
                    <span class="material-icons approach-icon">search</span>
                    <div class="approach-title">RAG</div>
                </div>
                <div class="flow-steps">
                    <div class="flow-step">
                        <div class="step-number">1</div>
                        <div class="step-text">Retrieve relevant docs</div>
                    </div>
                    <div class="flow-step">
                        <div class="step-number">2</div>
                        <div class="step-text">Add to context</div>
                    </div>
                    <div class="flow-step">
                        <div class="step-number">3</div>
                        <div class="step-text">Generate</div>
                    </div>
                </div>
                <div class="pros-cons">
                    <div class="pros">
                        <div class="pros-title">‚úì Pros</div>
                        <div class="pros-list">Works well for knowledge bases, documentation, historical data</div>
                    </div>
                    <div class="cons">
                        <div class="cons-title">‚úó Cons</div>
                        <div class="cons-list">Read-only. Can't take actions.</div>
                    </div>
                </div>
            </div>

            <!-- Function Calling -->
            <div class="approach">
                <div class="approach-header">
                    <span class="material-icons approach-icon">functions</span>
                    <div class="approach-title">Function Calling</div>
                </div>
                <div class="flow-steps">
                    <div class="flow-step">
                        <div class="step-number">1</div>
                        <div class="step-text">LLM outputs function call</div>
                    </div>
                    <div class="flow-step">
                        <div class="step-number">2</div>
                        <div class="step-text">Execute</div>
                    </div>
                    <div class="flow-step">
                        <div class="step-number">3</div>
                        <div class="step-text">Return result</div>
                    </div>
                </div>
                <div class="pros-cons">
                    <div class="pros">
                        <div class="pros-title">‚úì Pros</div>
                        <div class="pros-list">Enables actions: write to DB, call APIs, execute code</div>
                    </div>
                    <div class="cons">
                        <div class="cons-title">‚úó Cons</div>
                        <div class="cons-list">No standardization. Provider-specific.</div>
                    </div>
                </div>
            </div>

            <!-- MCP -->
            <div class="approach mcp-highlight">
                <div class="approach-header">
                    <span class="material-icons approach-icon">electrical_services</span>
                    <div class="approach-title">MCP</div>
                </div>
                <div class="flow-steps">
                    <div class="flow-step">
                        <div class="step-number">1</div>
                        <div class="step-text">Standardized protocol</div>
                    </div>
                    <div class="flow-step">
                        <div class="step-number">2</div>
                        <div class="step-text">Resources + Tools</div>
                    </div>
                    <div class="flow-step">
                        <div class="step-number">3</div>
                        <div class="step-text">LLM-agnostic</div>
                    </div>
                </div>
                <div class="pros-cons">
                    <div class="pros">
                        <div class="pros-title">‚úì Pros</div>
                        <div class="pros-list">Universal adapter. Write once, use anywhere. Standardization.</div>
                    </div>
                    <div class="cons">
                        <div class="cons-title">‚úó Cons</div>
                        <div class="cons-list">Emerging standard. Ecosystem still growing.</div>
                    </div>
                </div>
            </div>
        </div>
                <aside class="notes"></aside>
            </section>
            
            <!-- Slide 008: Transition to MCP Deep Dive -->
            <section>
<h1>Deep Dive: Model Context Protocol</h1>
        
        <div class="transition-content">
            <div class="transition-icon">
                <span class="material-icons">electrical_services</span>
            </div>
            
            <div class="transition-text">
                Now let's explore how MCP works
            </div>
            
            <div class="next-section">
                Architecture, primitives, use cases, and implementation
            </div>
        </div>
                <aside class="notes"></aside>
            </section>
            
            <!-- Slide 009: What is MCP? -->
            <section>
<h1>What is MCP?</h1>
        
        <div class="diagram">
            <div class="component">
                <div class="box">
                    <span class="material-icons">chat</span>
                </div>
                <div class="label">LLM Client</div>
            </div>

            <div class="arrow-container">
                <span class="material-icons arrow arrow-right">arrow_forward</span>
                <span class="material-icons arrow arrow-left">arrow_back</span>
            </div>

            <div class="component">
                <div class="box box-highlight">
                    <span class="material-icons icon-highlight">electrical_services</span>
                </div>
                <div class="label">MCP Protocol</div>
            </div>

            <div class="arrow-container">
                <span class="material-icons arrow arrow-right">arrow_forward</span>
                <span class="material-icons arrow arrow-left">arrow_back</span>
            </div>

            <div class="component">
                <div class="box">
                    <span class="material-icons">storage</span>
                </div>
                <div class="label">External Systems</div>
            </div>
        </div>

        <div class="subtitle">
            A standardized protocol for LLM-tool integration - like USB-C for AI
        </div>

        <div class="features">
            <div class="feature">
                <span class="material-icons">extension</span>
                <div class="feature-text">Plug & Play</div>
            </div>

            <div class="feature">
                <span class="material-icons">security</span>
                <div class="feature-text">Security Boundary</div>
            </div>

            <div class="feature">
                <span class="material-icons">sync_alt</span>
                <div class="feature-text">Bidirectional</div>
            </div>

            <div class="feature">
                <span class="material-icons">public</span>
                <div class="feature-text">Open Standard</div>
            </div>
        </div>
                <aside class="notes"></aside>
            </section>
            
            <!-- Slide 010: MCP Architecture -->
            <section>
<h1>MCP Architecture</h1>
        
        <div class="architecture">
            <!-- Top Layer: Host Application -->
            <div class="layer">
                <div class="layer-box">
                    <span class="material-icons">desktop_windows</span>
                    <div class="layer-title">Host Application (Claude Desktop, IDEs, etc.)</div>
                </div>
            </div>

            <div class="connection-arrow">
                <span class="material-icons arrow-down">arrow_downward</span>
                <span class="material-icons arrow-up">arrow_upward</span>
            </div>

            <!-- Middle Layer: MCP Client and Server Communication -->
            <div class="layer">
                <div class="layer-box layer-highlight">
                    <span class="protocol-badge">JSON-RPC</span>
                    <span class="material-icons">chat</span>
                    <div class="layer-title">MCP Client</div>
                    <span class="material-icons" style="font-size: 60px;">sync_alt</span>
                    <span class="material-icons">dns</span>
                    <div class="layer-title">MCP Server(s)</div>
                </div>
                <div class="transport-info">Transport: stdio / Server-Sent Events (SSE)</div>
            </div>

            <div class="connection-arrow">
                <span class="material-icons arrow-down">arrow_downward</span>
                <span class="material-icons arrow-up">arrow_upward</span>
            </div>

            <!-- Bottom Layer: Multiple Servers -->
            <div class="layer">
                <div class="servers-row">
                    <div class="server-item">
                        <div class="server-icon">
                            <span class="material-icons">storage</span>
                        </div>
                        <div class="server-label">Database<br>Server</div>
                    </div>

                    <div class="server-item">
                        <div class="server-icon">
                            <span class="material-icons">folder</span>
                        </div>
                        <div class="server-label">File System<br>Server</div>
                    </div>

                    <div class="server-item">
                        <div class="server-icon">
                            <span class="material-icons">cloud</span>
                        </div>
                        <div class="server-label">API<br>Server</div>
                    </div>
                </div>
            </div>
        </div>
                <aside class="notes"></aside>
            </section>
            
            <!-- Slide 011: The Three Primitives -->
            <section>
<h1>The Three Primitives</h1>
        
        <div class="primitives-grid">
            <!-- Resources -->
            <div class="primitive">
                <div class="primitive-icon">
                    <span class="material-icons">description</span>
                </div>
                <div class="primitive-title">Resources</div>
                <div class="primitive-description">
                    Static or dynamic data that can be read
                </div>
                <div class="primitive-example">
                    <div class="example-label">Examples</div>
                    <div class="example-text">
                        ‚Ä¢ File contents<br>
                        ‚Ä¢ DB query results<br>
                        ‚Ä¢ API responses
                    </div>
                </div>
            </div>

            <!-- Prompts -->
            <div class="primitive">
                <div class="primitive-icon">
                    <span class="material-icons">psychology</span>
                </div>
                <div class="primitive-title">Prompts</div>
                <div class="primitive-description">
                    Templated instructions for common tasks
                </div>
                <div class="primitive-example">
                    <div class="example-label">Examples</div>
                    <div class="example-text">
                        ‚Ä¢ Code review template<br>
                        ‚Ä¢ Analysis prompt<br>
                        ‚Ä¢ Workflow instructions
                    </div>
                </div>
            </div>

            <!-- Tools -->
            <div class="primitive">
                <div class="primitive-icon">
                    <span class="material-icons">build</span>
                </div>
                <div class="primitive-title">Tools</div>
                <div class="primitive-description">
                    Functions the LLM can execute
                </div>
                <div class="primitive-example">
                    <div class="example-label">Examples</div>
                    <div class="example-text">
                        ‚Ä¢ execute_query()<br>
                        ‚Ä¢ create_file()<br>
                        ‚Ä¢ send_email()
                    </div>
                </div>
            </div>
        </div>
                <aside class="notes"></aside>
            </section>
            
            <!-- Slide 012: Interaction Flow -->
            <section>
<h1>Interaction Flow</h1>
        
        <div class="sequence-diagram">
            <div class="participants">
                <div class="participant">
                    <div class="participant-box">
                        <span class="material-icons participant-icon">person</span>
                        <div class="participant-name">User</div>
                    </div>
                </div>

                <div class="participant">
                    <div class="participant-box">
                        <span class="material-icons participant-icon">chat</span>
                        <div class="participant-name">Client</div>
                    </div>
                </div>

                <div class="participant">
                    <div class="participant-box">
                        <span class="material-icons participant-icon">dns</span>
                        <div class="participant-name">Server</div>
                    </div>
                </div>

                <div class="participant">
                    <div class="participant-box">
                        <span class="material-icons participant-icon">smart_toy</span>
                        <div class="participant-name">LLM</div>
                    </div>
                </div>
            </div>

            <div class="interactions">
                <div class="message">
                    <div class="message-number">1</div>
                    <span class="material-icons message-arrow">arrow_forward</span>
                    <div class="message-content">
                        <div class="message-from-to">User ‚Üí Client</div>
                        <div class="message-text">"Analyze sales data from Q4"</div>
                    </div>
                </div>

                <div class="message">
                    <div class="message-number">2</div>
                    <span class="material-icons message-arrow">arrow_forward</span>
                    <div class="message-content">
                        <div class="message-from-to">Client ‚Üí Server</div>
                        <div class="message-text">list_resources()</div>
                    </div>
                </div>

                <div class="message">
                    <div class="message-number">3</div>
                    <span class="material-icons message-arrow">arrow_back</span>
                    <div class="message-content">
                        <div class="message-from-to">Server ‚Üí Client</div>
                        <div class="message-text">[available resources]</div>
                    </div>
                </div>

                <div class="note">
                    <div class="note-text">Client reasons about what's needed...</div>
                </div>

                <div class="message">
                    <div class="message-number">4</div>
                    <span class="material-icons message-arrow">arrow_forward</span>
                    <div class="message-content">
                        <div class="message-from-to">Client ‚Üí Server</div>
                        <div class="message-text">read_resource("sales_db://q4_2024")</div>
                    </div>
                </div>

                <div class="message">
                    <div class="message-number">5</div>
                    <span class="material-icons message-arrow">arrow_back</span>
                    <div class="message-content">
                        <div class="message-from-to">Server ‚Üí Client</div>
                        <div class="message-text">[sales data]</div>
                    </div>
                </div>

                <div class="message">
                    <div class="message-number">6</div>
                    <span class="material-icons message-arrow">arrow_forward</span>
                    <div class="message-content">
                        <div class="message-from-to">Client ‚Üí LLM</div>
                        <div class="message-text">Generates analysis with data</div>
                    </div>
                </div>

                <div class="message">
                    <div class="message-number">7</div>
                    <span class="material-icons message-arrow">arrow_forward</span>
                    <div class="message-content">
                        <div class="message-from-to">Client ‚Üí Server</div>
                        <div class="message-text">call_tool("create_visualization", params)</div>
                    </div>
                </div>

                <div class="message">
                    <div class="message-number">8</div>
                    <span class="material-icons message-arrow">arrow_back</span>
                    <div class="message-content">
                        <div class="message-from-to">Server ‚Üí Client</div>
                        <div class="message-text">[chart created]</div>
                    </div>
                </div>

                <div class="message">
                    <div class="message-number">9</div>
                    <span class="material-icons message-arrow">arrow_back</span>
                    <div class="message-content">
                        <div class="message-from-to">Client ‚Üí User</div>
                        <div class="message-text">"Here's your analysis with visualization"</div>
                    </div>
                </div>
            </div>
        </div>
                <aside class="notes"></aside>
            </section>
            
            <!-- Slide 013: Use Case - File System Server -->
            <section>
<h1>Use Case: File System Server</h1>
        
        <div class="split-container">
            <!-- Left Panel: Code -->
            <div class="panel">
                <div class="panel-title">
                    <span class="material-icons">code</span>
                    Server Implementation
                </div>
                
                <div class="code-block">
<span class="code-comment"># File System MCP Server</span>

<span class="code-keyword">class</span> <span class="code-function">FileSystemServer</span>:
    <span class="code-comment"># Resources - Read files</span>
    <span class="code-keyword">def</span> <span class="code-function">list_resources</span>():
        <span class="code-keyword">return</span> [
            <span class="code-string">"file:///project/src/main.py"</span>,
            <span class="code-string">"file:///project/src/utils.py"</span>,
            ...
        ]
    
    <span class="code-comment"># Tools - Modify files</span>
    tools = [
        <span class="code-string">"create_file"</span>,
        <span class="code-string">"edit_file"</span>,
        <span class="code-string">"delete_file"</span>,
        <span class="code-string">"search_files"</span>
    ]
                </div>

                <div class="tools-section">
                    <div class="tools-title">Available Tools:</div>
                    <div class="tool-list">
                        <div class="tool-item">create_file(path, content)</div>
                        <div class="tool-item">edit_file(path, changes)</div>
                        <div class="tool-item">delete_file(path)</div>
                        <div class="tool-item">search_files(pattern)</div>
                    </div>
                </div>
            </div>

            <!-- Right Panel: Workflow -->
            <div class="panel">
                <div class="panel-title">
                    <span class="material-icons">account_tree</span>
                    Example Interaction
                </div>

                <div class="workflow">
                    <div class="step">
                        <div class="step-number">1</div>
                        <span class="material-icons step-icon">visibility</span>
                        <div class="step-content">
                            <div class="step-title">Read File</div>
                            <div class="step-description">
                                LLM requests file resource:<br>
                                <code>file:///project/src/main.py</code>
                            </div>
                        </div>
                    </div>

                    <div class="step">
                        <div class="step-number">2</div>
                        <span class="material-icons step-icon">psychology</span>
                        <div class="step-content">
                            <div class="step-title">Analyze & Plan</div>
                            <div class="step-description">
                                LLM reasons about refactoring into smaller, focused functions
                            </div>
                        </div>
                    </div>

                    <div class="step">
                        <div class="step-number">3</div>
                        <span class="material-icons step-icon">note_add</span>
                        <div class="step-content">
                            <div class="step-title">Create New Files</div>
                            <div class="step-description">
                                Calls <code>create_file()</code> for new modules
                            </div>
                        </div>
                    </div>

                    <div class="step">
                        <div class="step-number">4</div>
                        <span class="material-icons step-icon">edit</span>
                        <div class="step-content">
                            <div class="step-title">Modify Existing</div>
                            <div class="step-description">
                                Calls <code>edit_file()</code> to update imports and references
                            </div>
                        </div>
                    </div>
                </div>

                <div class="tools-section">
                    <div class="tools-title">üí° Used by:</div>
                    <div class="step-description" style="color: #e2e8f0; padding-top: 8px;">
                        Cursor, Windsurf, and similar AI coding assistants use this pattern to give LLMs controlled access to your codebase.
                    </div>
                </div>
            </div>
        </div>
                <aside class="notes"></aside>
            </section>
            
            <!-- Slide 014: Use Case - Database Server -->
            <section>
<h1>Use Case: Database Server</h1>
        
        <div class="diagram-container">
            <!-- Architecture Flow -->
            <div class="architecture-flow">
                <div class="component-box">
                    <span class="material-icons component-icon">smart_toy</span>
                    <div class="component-title">LLM</div>
                </div>

                <span class="material-icons arrow">arrow_forward</span>

                <div class="component-box security-boundary">
                    <span class="material-icons component-icon security-icon">shield</span>
                    <div class="component-title">MCP Server<br><small style="color: #ef4444; font-size: 0.8em;">Security Boundary</small></div>
                </div>

                <span class="material-icons arrow">arrow_forward</span>

                <div class="component-box">
                    <span class="material-icons component-icon">storage</span>
                    <div class="component-title">Database</div>
                </div>
            </div>

            <!-- Details Grid -->
            <div class="details-grid">
                <!-- Resources Panel -->
                <div class="detail-panel">
                    <div class="panel-header">
                        <span class="material-icons panel-icon">description</span>
                        <div class="panel-title">Resources</div>
                    </div>
                    <div class="item-list">
                        <div class="list-item">
                            <span class="material-icons item-icon">account_tree</span>
                            <div class="item-text">schema_info</div>
                        </div>
                        <div class="list-item">
                            <span class="material-icons item-icon">table_chart</span>
                            <div class="item-text">table_listings</div>
                        </div>
                        <div class="list-item">
                            <span class="material-icons item-icon">cached</span>
                            <div class="item-text">cached_queries</div>
                        </div>
                    </div>
                </div>

                <!-- Tools Panel -->
                <div class="detail-panel">
                    <div class="panel-header">
                        <span class="material-icons panel-icon">build</span>
                        <div class="panel-title">Tools</div>
                    </div>
                    <div class="item-list">
                        <div class="list-item">
                            <span class="material-icons item-icon">play_arrow</span>
                            <div class="item-text">execute_query()</div>
                        </div>
                        <div class="list-item">
                            <span class="material-icons item-icon">add_circle</span>
                            <div class="item-text">create_table()</div>
                        </div>
                        <div class="list-item">
                            <span class="material-icons item-icon">insights</span>
                            <div class="item-text">explain_query()</div>
                        </div>
                        <div class="list-item">
                            <span class="material-icons item-icon">backup</span>
                            <div class="item-text">backup_table()</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Security Note -->
            <div class="security-note">
                <div class="security-header">
                    <span class="material-icons" style="font-size: 40px; color: #ef4444;">security</span>
                    <div class="security-title">Security Boundary</div>
                </div>
                <div class="security-text">
                    The MCP server acts as a protective layer, enforcing policies like table access restrictions, SQL operation limits, rate limiting, and approval requirements for destructive operations. Never give LLMs direct database credentials!
                </div>
            </div>
        </div>
                <aside class="notes"></aside>
            </section>
            
            <!-- Slide 015: Code Example -->
            <section>
<h1>Code Example</h1>
        <div class="subtitle">Minimal Weather MCP Server in Python</div>
        
        <div class="code-container">
            <div class="code-header">
                <span class="material-icons header-icon">code</span>
                <div class="header-title">weather_server.py</div>
            </div>
            
            <div class="code-block"><span class="code-keyword">from</span> mcp.server <span class="code-keyword">import</span> Server<br>
<span class="code-keyword">import</span> mcp.types <span class="code-keyword">as</span> types<br>
<br>
app = <span class="code-function">Server</span>(<span class="code-string">"weather-server"</span>)<br>
<br>
<span class="code-comment"># Define a resource for current temperature</span><br>
<span class="code-decorator">@app.resource</span>(<span class="code-string">"weather://temperature/{location}"</span>)<br>
<span class="code-keyword">async def</span> <span class="code-function">get_temperature</span>(location: <span class="code-class">str</span>) -> types.<span class="code-class">Resource</span>:<br>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="code-comment"># Fetch temperature data</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;temp = <span class="code-keyword">await</span> <span class="code-function">fetch_temperature</span>(location)<br>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="code-keyword">return</span> types.<span class="code-function">Resource</span>(<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;uri=<span class="code-string">f"weather://temperature/{location}"</span>,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;name=<span class="code-string">f"Temperature for {location}"</span>,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;content=<span class="code-string">f"{temp}¬∞C"</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;)<br>
<br>
<span class="code-comment"># Define a tool for forecast</span><br>
<span class="code-decorator">@app.tool</span>()<br>
<span class="code-keyword">async def</span> <span class="code-function">get_forecast</span>(<br>
&nbsp;&nbsp;&nbsp;&nbsp;location: <span class="code-class">str</span>,<br>
&nbsp;&nbsp;&nbsp;&nbsp;days: <span class="code-class">int</span> = <span class="code-number">5</span><br>
) -> <span class="code-class">str</span>:<br>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="code-string">"""Get weather forecast for a location"""</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;forecast = <span class="code-keyword">await</span> <span class="code-function">fetch_forecast</span>(location, days)<br>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="code-keyword">return</span> <span class="code-function">format_forecast</span>(forecast)<br>
<br>
<span class="code-comment"># Run the server</span><br>
<span class="code-keyword">if</span> __name__ == <span class="code-string">"__main__"</span>:<br>
&nbsp;&nbsp;&nbsp;&nbsp;app.<span class="code-function">run</span>(transport=<span class="code-string">"stdio"</span>)</div>
        </div>

        <div class="key-points">
            <div class="point">
                <span class="material-icons point-icon">emoji_objects</span>
                <div class="point-text">
                    Focus on business logic, not protocol details
                </div>
            </div>

            <div class="point">
                <span class="material-icons point-icon">cable</span>
                <div class="point-text">
                    MCP SDK handles all communication (stdio/SSE)
                </div>
            </div>

            <div class="point">
                <span class="material-icons point-icon">apps</span>
                <div class="point-text">
                    Works with any MCP-compatible client
                </div>
            </div>
        </div>
                <aside class="notes"></aside>
            </section>
            
            <!-- Slide 016: Security Considerations -->
            <section>
<h1>Security Considerations</h1>
        <div class="subtitle">
            The MCP server is your security boundary - implement these protections
        </div>
        
        <div class="security-grid">
            <!-- Authentication -->
            <div class="security-item">
                <div class="security-icon-container">
                    <span class="material-icons">verified_user</span>
                </div>
                <div class="security-title">Authentication</div>
                <div class="security-description">
                    Control who can connect using API keys, OAuth tokens, or secure channels
                </div>
            </div>

            <!-- Authorization -->
            <div class="security-item">
                <div class="security-icon-container">
                    <span class="material-icons">admin_panel_settings</span>
                </div>
                <div class="security-title">Authorization</div>
                <div class="security-description">
                    Implement least privilege - expose only necessary resources and tools
                </div>
            </div>

            <!-- Input Validation -->
            <div class="security-item">
                <div class="security-icon-container">
                    <span class="material-icons">rule</span>
                </div>
                <div class="security-title">Input Validation</div>
                <div class="security-description">
                    Never trust LLM output - validate all parameters, sanitize inputs
                </div>
            </div>

            <!-- Rate Limiting -->
            <div class="security-item">
                <div class="security-icon-container">
                    <span class="material-icons">speed</span>
                </div>
                <div class="security-title">Rate Limiting</div>
                <div class="security-description">
                    Prevent abuse and system overload from excessive LLM calls
                </div>
            </div>

            <!-- Audit Logging -->
            <div class="security-item">
                <div class="security-icon-container">
                    <span class="material-icons">description</span>
                </div>
                <div class="security-title">Audit Logging</div>
                <div class="security-description">
                    Log all operations for accountability, debugging, and compliance
                </div>
            </div>

            <!-- Sandboxing -->
            <div class="security-item">
                <div class="security-icon-container">
                    <span class="material-icons">lock</span>
                </div>
                <div class="security-title">Isolation</div>
                <div class="security-description">
                    Run servers in sandboxed environments with minimal permissions
                </div>
            </div>
        </div>

        <div class="highlight-box">
            <span class="material-icons highlight-icon">warning</span>
            <div class="highlight-text">
                <span class="highlight-emphasis">Critical:</span> The protocol itself is just transport. You must implement security in your server logic. The MCP server is your security boundary!
            </div>
        </div>
                <aside class="notes"></aside>
            </section>
            
            <!-- Slide 017: MCP vs Alternatives -->
            <section>
<h1>MCP vs Alternatives</h1>
        
        <div class="comparison-container">
            <table class="comparison-table">
                <thead>
                    <tr>
                        <th>Solution</th>
                        <th>Standardization</th>
                        <th>Flexibility</th>
                        <th>Best For</th>
                    </tr>
                </thead>
                <tbody>
                    <tr class="highlight">
                        <td>
                            <span class="material-icons row-icon">electrical_services</span>
                            MCP
                        </td>
                        <td>
                            <div class="rating">
                                <span class="material-icons rating-icon">star</span>
                                <span class="material-icons rating-icon">star</span>
                                <span class="material-icons rating-icon">star</span>
                            </div>
                            Open standard, LLM-agnostic
                        </td>
                        <td>
                            <div class="rating">
                                <span class="material-icons rating-icon">star</span>
                                <span class="material-icons rating-icon">star</span>
                                <span class="material-icons rating-icon">star</span>
                            </div>
                            Complex, stateful interactions
                        </td>
                        <td>
                            Building reusable, production-grade tool integrations
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <span class="material-icons row-icon">functions</span>
                            Function Calling
                        </td>
                        <td>
                            <div class="rating">
                                <span class="material-icons rating-icon">star</span>
                                <span class="material-icons rating-icon">star</span>
                            </div>
                            Provider-specific APIs
                        </td>
                        <td>
                            <div class="rating">
                                <span class="material-icons rating-icon">star</span>
                                <span class="material-icons rating-icon">star</span>
                            </div>
                            Simple, stateless calls
                        </td>
                        <td>
                            Quick integrations with specific LLM providers
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <span class="material-icons row-icon">link</span>
                            LangChain
                        </td>
                        <td>
                            <div class="rating">
                                <span class="material-icons rating-icon">star</span>
                                <span class="material-icons rating-icon">star</span>
                            </div>
                            Framework abstractions
                        </td>
                        <td>
                            <div class="rating">
                                <span class="material-icons rating-icon">star</span>
                                <span class="material-icons rating-icon">star</span>
                                <span class="material-icons rating-icon">star</span>
                            </div>
                            Chains, agents, workflows
                        </td>
                        <td>
                            Rapid prototyping, complex agent workflows
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <span class="material-icons row-icon">precision_manufacturing</span>
                            AutoGPT
                        </td>
                        <td>
                            <div class="rating">
                                <span class="material-icons rating-icon">star</span>
                            </div>
                            Autonomous agent system
                        </td>
                        <td>
                            <div class="rating">
                                <span class="material-icons rating-icon">star</span>
                                <span class="material-icons rating-icon">star</span>
                            </div>
                            High-level autonomy
                        </td>
                        <td>
                            Autonomous task execution, research use cases
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>

        <div class="key-advantage">
            <span class="material-icons advantage-icon">hub</span>
            <div class="advantage-text">
                <span class="advantage-emphasis">Key Advantage:</span> Write one MCP server, use it anywhere. As the ecosystem grows, pre-built servers for common needs will emerge - just like npm for JavaScript or PyPI for Python.
            </div>
        </div>
                <aside class="notes"></aside>
            </section>
            
            <!-- Slide 018: Future Directions & Research -->
            <section>
<h1>Future Directions & Research</h1>
        
        <div class="content-container">
            <!-- Mind Map of Directions -->
            <div class="mind-map">
                <div class="direction">
                    <div class="direction-icon-container">
                        <span class="material-icons">groups</span>
                    </div>
                    <div class="direction-title">Multi-Agent Systems</div>
                    <div class="direction-desc">
                        Multiple LLMs sharing MCP servers - concurrency & state management
                    </div>
                </div>

                <div class="direction">
                    <div class="direction-icon-container">
                        <span class="material-icons">stream</span>
                    </div>
                    <div class="direction-title">Streaming & Real-Time</div>
                    <div class="direction-desc">
                        Beyond request-response: streaming data sources & live updates
                    </div>
                </div>

                <div class="direction">
                    <div class="direction-icon-container">
                        <span class="material-icons">verified</span>
                    </div>
                    <div class="direction-title">Formal Verification</div>
                    <div class="direction-desc">
                        Proving security policies for critical applications
                    </div>
                </div>

                <div class="direction">
                    <div class="direction-icon-container">
                        <span class="material-icons">speed</span>
                    </div>
                    <div class="direction-title">Performance</div>
                    <div class="direction-desc">
                        Optimizing protocol overhead for high-throughput scenarios
                    </div>
                </div>

                <div class="direction">
                    <div class="direction-icon-container">
                        <span class="material-icons">explore</span>
                    </div>
                    <div class="direction-title">Ecosystem Growth</div>
                    <div class="direction-desc">
                        Server registries, versioning, dependencies - like npm for MCP
                    </div>
                </div>
            </div>

            <!-- Research Questions -->
            <div class="research-section">
                <div class="research-header">
                    <span class="material-icons research-icon">science</span>
                    <div class="research-title">Open Research Questions</div>
                </div>

                <div class="research-questions">
                    <div class="question">
                        <span class="material-icons question-icon">help_outline</span>
                        <div class="question-text">
                            How do we prevent prompt injection attacks through MCP resources?
                        </div>
                    </div>

                    <div class="question">
                        <span class="material-icons question-icon">help_outline</span>
                        <div class="question-text">
                            Can we build MCP servers that adapt their capabilities based on LLM performance and reliability?
                        </div>
                    </div>

                    <div class="question">
                        <span class="material-icons question-icon">help_outline</span>
                        <div class="question-text">
                            What's the right abstraction for long-running workflows that span multiple sessions?
                        </div>
                    </div>
                </div>
            </div>
        </div>
                <aside class="notes"></aside>
            </section>
            
            <!-- Slide 019: Summary & Key Takeaways -->
            <section>
<h1>Summary & Key Takeaways</h1>
        
        <div class="content-wrapper">
            <!-- Key Takeaways -->
            <div class="takeaways">
                <div class="takeaway">
                    <div class="takeaway-icon-container">
                        <span class="material-icons">electrical_services</span>
                    </div>
                    <div class="takeaway-text">
                        MCP standardizes how LLMs connect to external tools and data - one interface for everything
                    </div>
                </div>

                <div class="takeaway">
                    <div class="takeaway-icon-container">
                        <span class="material-icons">widgets</span>
                    </div>
                    <div class="takeaway-text">
                        Three primitives - Resources, Prompts, Tools - provide flexibility for any use case
                    </div>
                </div>

                <div class="takeaway">
                    <div class="takeaway-icon-container">
                        <span class="material-icons">shield</span>
                    </div>
                    <div class="takeaway-text">
                        Servers act as security boundaries - implement authentication, validation, and rate limiting
                    </div>
                </div>

                <div class="takeaway">
                    <div class="takeaway-icon-container">
                        <span class="material-icons">language</span>
                    </div>
                    <div class="takeaway-text">
                        Protocol is LLM-agnostic and supports complex, stateful interactions
                    </div>
                </div>

                <div class="takeaway">
                    <div class="takeaway-icon-container">
                        <span class="material-icons">rocket_launch</span>
                    </div>
                    <div class="takeaway-text">
                        Early days - huge opportunities for building the ecosystem and pre-built servers
                    </div>
                </div>
            </div>

            <!-- Call to Action -->
            <div class="cta-section">
                <div class="cta-title">For Your Projects</div>
                <div class="cta-text">
                    Building an AI tool that needs database access? File system operations? API integrations?<br>
                    <strong style="color: #2dd4bf;">MCP might be your answer.</strong>
                </div>
                
                <div class="resources">
                    <div class="resource-item">
                        <span class="material-icons resource-icon">code</span>
                        Python SDK
                    </div>
                    <div class="resource-item">
                        <span class="material-icons resource-icon">code</span>
                        TypeScript SDK
                    </div>
                    <div class="resource-item">
                        <span class="material-icons resource-icon">description</span>
                        Open Spec
                    </div>
                    <div class="resource-item">
                        <span class="material-icons resource-icon">groups</span>
                        Growing Community
                    </div>
                </div>
            </div>

            <!-- Questions -->
            <div class="questions-footer">
                <div class="questions-text">Questions?</div>
            </div>
        </div>
                <aside class="notes"></aside>
            </section>
        </div>
    </div>

    <!-- Reveal.js JS -->
    <script src="https://cdn.jsdelivr.net/npm/reveal.js@4.6.1/dist/reveal.js"></script>
    
    <script>
        // Initialize Reveal.js
        Reveal.initialize({
            hash: true,
            controls: true,
            progress: true,
            center: false,
            width: '100%',  // Use 100% width instead of default 960px
            height: '100%',  // Use 100% height instead of default 700px
            touch: true,
            loop: false,
            rtl: false,
            navigationMode: 'default',
            shuffle: false,
            fragments: true,
            fragmentInURL: true,
            embedded: false,
            help: true,
            pause: true,
            showNotes: false,
            autoPlayMedia: null,
            preloadIframes: null,
            autoAnimate: true,
            autoAnimateMatcher: null,
            autoAnimateEasing: 'ease',
            autoAnimateDuration: 1.0,
            autoAnimateUnmatched: true,
            autoSlide: 0,
            autoSlideStoppable: true,
            autoSlideMethod: null,
            defaultTiming: null,
            mouseWheel: false,
            previewLinks: false,
            postMessage: true,
            postMessageEvents: false,
            focusBodyOnPageVisibilityChange: true,
            transition: 'slide',
            transitionSpeed: 'default',
            backgroundTransition: 'fade',
            view: null,
            viewDistance: 3,
            parallaxBackgroundImage: '',
            parallaxBackgroundSize: '',
            parallaxBackgroundRepeat: '',
            parallaxBackgroundPosition: '',
            parallaxBackgroundHorizontal: null,
            parallaxBackgroundVertical: null,
            // Presenter mode configuration
            // FAS 3.1: Remove custom keyboard handler - let Reveal.js handle 'S' key
            keyboard: true  // Use default Reveal.js keyboard bindings including 'S' for presenter mode
        });

        // Get presentation name from URL path
        function getPresentationName() {
            return 'uppsala_uni_18_nov_2025';
        }

        // Load notes from API and inject into slides
        async function loadNotes() {
            const presentationName = getPresentationName();
            if (!presentationName) return;

            try {
                const response = await fetch(`/api/presentations/${presentationName}/notes`);
                const data = await response.json();
                
                if (data.notes && data.notes.length > 0) {
                    // Inject notes into corresponding slides
                    data.notes.forEach(noteData => {
                        const slideIndex = noteData.slide - 1; // Convert to 0-based index
                        const slides = document.querySelectorAll('.reveal .slides section');
                        
                        if (slides[slideIndex]) {
                            let notesElement = slides[slideIndex].querySelector('aside.notes');
                            
                            if (!notesElement) {
                                notesElement = document.createElement('aside');
                                notesElement.className = 'notes';
                                slides[slideIndex].appendChild(notesElement);
                            }
                            
                            // Convert markdown notes to HTML
                            if (noteData.notes) {
                                // Simple markdown to HTML conversion for basic formatting
                                let htmlNotes = noteData.notes
                                    .replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>')
                                    .replace(/\*(.*?)\*/g, '<em>$1</em>')
                                    .replace(/`(.*?)`/g, '<code>$1</code>')
                                    .replace(/\n\n/g, '</p><p>')
                                    .replace(/\n/g, '<br>');
                                
                                if (!htmlNotes.startsWith('<p>')) {
                                    htmlNotes = '<p>' + htmlNotes;
                                }
                                if (!htmlNotes.endsWith('</p>')) {
                                    htmlNotes = htmlNotes + '</p>';
                                }
                                
                                notesElement.innerHTML = htmlNotes;
                            }
                        }
                    });
                    
                    // Trigger Reveal.js to update notes if already initialized
                    if (Reveal.isReady()) {
                        Reveal.sync();
                    }
                }
            } catch (error) {
                console.error('Error loading notes:', error);
            }
        }

        // DIAGNOSTIC: Comprehensive DOM and CSS analysis
        function diagnosticAnalysis() {
            console.log('\n=== DIAGNOSTIC ANALYSIS START ===\n');
            
            const currentSlide = document.querySelector('.reveal .slides section.present');
            if (!currentSlide) {
                console.error('No current slide found!');
                return;
            }
            
            // 1. DOM STRUCTURE ANALYSIS
            console.log('1. DOM STRUCTURE:');
            console.log('   Section element:', currentSlide);
            console.log('   Section tagName:', currentSlide.tagName);
            console.log('   Section className:', currentSlide.className);
            console.log('   Section id:', currentSlide.id);
            
            // Get ALL children recursively
            function getAllChildren(element, depth = 0) {
                const indent = '  '.repeat(depth);
                const children = Array.from(element.children);
                console.log(`${indent}${element.tagName}${element.className ? '.' + element.className.split(' ').join('.') : ''}${element.id ? '#' + element.id : ''}`);
                children.forEach(child => getAllChildren(child, depth + 1));
            }
            
            console.log('   Full DOM tree from section:');
            getAllChildren(currentSlide);
            
            // 2. CHECK FOR REVEAL.JS WRAPPERS
            console.log('\n2. REVEAL.JS WRAPPERS:');
            const slideBackground = currentSlide.querySelector('.slide-background');
            const slideBackgroundContent = currentSlide.querySelector('.slide-background-content');
            console.log('   .slide-background exists:', !!slideBackground);
            console.log('   .slide-background-content exists:', !!slideBackgroundContent);
            
            if (slideBackground) {
                console.log('   .slide-background parent:', slideBackground.parentElement?.tagName);
                console.log('   .slide-background children count:', slideBackground.children.length);
            }
            
            if (slideBackgroundContent) {
                console.log('   .slide-background-content parent:', slideBackgroundContent.parentElement?.tagName);
                console.log('   .slide-background-content children count:', slideBackgroundContent.children.length);
                console.log('   .slide-background-content first child:', slideBackgroundContent.firstElementChild?.tagName);
            }
            
            // 3. CHECK WHERE CONTENT ACTUALLY IS
            console.log('\n3. CONTENT LOCATION:');
            const h1 = currentSlide.querySelector('h1');
            const flowDiagram = currentSlide.querySelector('.flow-diagram');
            console.log('   H1 element:', h1);
            if (h1) {
                console.log('   H1 parent:', h1.parentElement?.tagName, h1.parentElement?.className);
                console.log('   H1 is direct child of section:', h1.parentElement === currentSlide);
            }
            console.log('   .flow-diagram element:', flowDiagram);
            if (flowDiagram) {
                console.log('   .flow-diagram parent:', flowDiagram.parentElement?.tagName, flowDiagram.parentElement?.className);
                console.log('   .flow-diagram is direct child of section:', flowDiagram.parentElement === currentSlide);
                if (slideBackgroundContent) {
                    console.log('   .flow-diagram is in .slide-background-content:', slideBackgroundContent.contains(flowDiagram));
                }
            }
            
            // 4. COMPUTED STYLES ANALYSIS
            console.log('\n4. COMPUTED STYLES FOR SECTION:');
            const sectionStyles = window.getComputedStyle(currentSlide);
            console.log('   display:', sectionStyles.display);
            console.log('   flex-direction:', sectionStyles.flexDirection);
            console.log('   text-align:', sectionStyles.textAlign);
            console.log('   background:', sectionStyles.background);
            console.log('   color:', sectionStyles.color);
            console.log('   padding:', sectionStyles.padding);
            console.log('   width:', sectionStyles.width);
            console.log('   max-width:', sectionStyles.maxWidth);
            console.log('   height:', sectionStyles.height);
            console.log('   max-height:', sectionStyles.maxHeight);
            console.log('   align-items:', sectionStyles.alignItems);
            console.log('   justify-content:', sectionStyles.justifyContent);
            
            // Check for inline styles
            console.log('   has inline style attribute:', currentSlide.hasAttribute('style'));
            if (currentSlide.hasAttribute('style')) {
                console.log('   inline style value:', currentSlide.getAttribute('style'));
            }
            
            // List all direct children and their computed styles
            console.log('\n4b. DIRECT CHILDREN OF SECTION:');
            Array.from(currentSlide.children).forEach((child, idx) => {
                const childStyles = window.getComputedStyle(child);
                console.log(`   Child ${idx}: ${child.tagName}${child.className ? '.' + child.className.split(' ').join('.') : ''}`);
                console.log(`     display: ${childStyles.display}`);
                console.log(`     width: ${childStyles.width}`);
                console.log(`     margin: ${childStyles.margin}`);
            });
            
            // 5. COMPUTED STYLES FOR .slide-background-content IF IT EXISTS
            if (slideBackgroundContent) {
                console.log('\n5. COMPUTED STYLES FOR .slide-background-content:');
                const contentStyles = window.getComputedStyle(slideBackgroundContent);
                console.log('   display:', contentStyles.display);
                console.log('   flex-direction:', contentStyles.flexDirection);
                console.log('   text-align:', contentStyles.textAlign);
                console.log('   background:', contentStyles.background);
                console.log('   color:', contentStyles.color);
                console.log('   padding:', contentStyles.padding);
                console.log('   width:', contentStyles.width);
                console.log('   has inline style attribute:', slideBackgroundContent.hasAttribute('style'));
                if (slideBackgroundContent.hasAttribute('style')) {
                    console.log('   inline style value:', slideBackgroundContent.getAttribute('style'));
                }
            }
            
            // 6. COMPUTED STYLES FOR .flow-diagram IF IT EXISTS
            if (flowDiagram) {
                console.log('\n6. COMPUTED STYLES FOR .flow-diagram:');
                const flowStyles = window.getComputedStyle(flowDiagram);
                console.log('   display:', flowStyles.display);
                console.log('   flex-direction:', flowStyles.flexDirection);
                console.log('   justify-content:', flowStyles.justifyContent);
                console.log('   align-items:', flowStyles.alignItems);
                console.log('   width:', flowStyles.width);
                console.log('   height:', flowStyles.height);
                console.log('   margin:', flowStyles.margin);
                console.log('   gap:', flowStyles.gap);
                console.log('   has inline style attribute:', flowDiagram.hasAttribute('style'));
                if (flowDiagram.hasAttribute('style')) {
                    console.log('   inline style value:', flowDiagram.getAttribute('style'));
                }
                
                // Check children of flow-diagram
                console.log('   .flow-diagram children:', Array.from(flowDiagram.children).map(c => ({
                    tag: c.tagName,
                    class: c.className,
                    text: c.textContent?.substring(0, 30)
                })));
            } else {
                console.log('\n6. .flow-diagram NOT FOUND in current slide');
            }
            
            // 7. CSS RULES THAT MATCH
            console.log('\n7. CSS RULES ANALYSIS:');
            const allStylesheets = Array.from(document.styleSheets);
            console.log('   Total stylesheets:', allStylesheets.length);
            allStylesheets.forEach((sheet, idx) => {
                try {
                    const rules = Array.from(sheet.cssRules || sheet.rules || []);
                    const matchingRules = rules.filter(rule => {
                        if (rule.selectorText) {
                            try {
                                return currentSlide.matches(rule.selectorText) || 
                                       (slideBackgroundContent && slideBackgroundContent.matches(rule.selectorText)) ||
                                       (flowDiagram && flowDiagram.matches(rule.selectorText));
                            } catch (e) {
                                return false;
                            }
                        }
                        return false;
                    });
                    if (matchingRules.length > 0) {
                        console.log(`   Stylesheet ${idx} (${sheet.href || 'inline'}): ${matchingRules.length} matching rules`);
                        matchingRules.slice(0, 5).forEach(rule => {
                            console.log(`     - ${rule.selectorText}`);
                        });
                    }
                } catch (e) {
                    console.log(`   Stylesheet ${idx}: Cannot access (CORS or other issue)`);
                }
            });
            
            console.log('\n=== DIAGNOSTIC ANALYSIS END ===\n');
        }
        
        // Load notes after Reveal.js is initialized
        Reveal.addEventListener('ready', () => {
            loadNotes();
            
            // FIX: Remove Reveal.js inline styles that override our CSS
            // Reveal.js sets inline style="display: block; width: 960px; height: 340px" on sections
            // We need to remove these or override them
            const allSections = document.querySelectorAll('.reveal .slides section');
            allSections.forEach(section => {
                // Remove or override inline styles
                section.style.removeProperty('display');
                section.style.removeProperty('width');
                section.style.removeProperty('height');
                section.style.removeProperty('max-width');
                section.style.removeProperty('max-height');
            });
            
            // Run diagnostic analysis
            setTimeout(() => {
                diagnosticAnalysis();
            }, 100); // Small delay to ensure DOM is fully ready
        });
        
        // Also load notes when slides change (for presenter view)
        Reveal.addEventListener('slidechanged', () => {
            // Notes will already be injected, but we ensure they're visible in presenter mode
            
            // Run diagnostic analysis on slide change too
            setTimeout(() => {
                diagnosticAnalysis();
            }, 100);
        });

        // Check if we should open in presenter mode
        const urlParams = new URLSearchParams(window.location.search);
        if (urlParams.get('view') === 'speaker') {
            // This is the presenter view window
            // Reveal.js will handle the presenter mode automatically
        }

        // Keyboard shortcuts
        document.addEventListener('keydown', (e) => {
            // Prevent default behavior for presentation navigation
            if (['ArrowRight', 'ArrowLeft', 'Space', 'PageDown', 'PageUp'].includes(e.key)) {
                // Reveal.js handles these
            }
        });
    </script>
</body>
</html>

